<!DOCTYPE html>
<html>
  <head>
    <title>Code Player</title>
    <script type="text/javascript" src="jquery.min.js"></script>
    <style type="text/css">
      body{
        font-family: sans-serif;
        margin: 0;
        padding: 0;
      }
      #header{
        width: 100%;
        height: 35px;
        background-color: #EEEEEE;
        border: 1px solid #BFBFBF;
      }
      #buttonContainer{
        width: 239px;
        margin: 0 auto;
      }
      #logo{
        float: left;
        font-weight: bold;
        font-size: 120%;
        padding: 3px 5px;
      }
      .buttons{
        font-size: 12px;
        float: left;
        border: 1px solid #BFBFBF;
        padding: 8px;
        border-right: none;
        margin-top: 1px;
    }
    #output{
        border-right: 1px solid #BFBFBF;
        border-top-right-radius: 5px;
        border-bottom-right-radius: 5px;

    }
    #html{
        border-top-left-radius: 5px;
        border-bottom-left-radius: 5px;
    }
    .active{
        background-color: #E8F2FF;
    }
    .highLightedButton{
        background-color: #E5E5E5;
    }
    #htmlTextArea{
        resize: none;
        border-top: none;
        border-bottom: none;
    }
    .panel{
        float: left;
        border-left: none;
        border-top: none;
        resize: none;
        border-bottom: none;
    }
    iframe{
        border: none;
    }
    .hidden{
        display: none;

    }
    </style>

  </head>
  <body>
    <div id="header">
      <div id="logo">
        CodePlayer
      </div>
      <div id="buttonContainer">
        <div id="html" class="buttons active">HTML</div>
        <div id="css" class="buttons">CSS</div>
        <div id="javascript" class="buttons">JavaScript</div>
        <div id="output" class="buttons active">Output</div>


      </div>
    </div>
    <div id="bodyContainer">
        <textarea id="htmlTextArea" class="panel"><p id="text">hello</p></textarea>
        <textarea id="cssTextArea" class="panel hidden">p{color:green;}</textarea>
        <textarea id="javascriptTextArea" class="panel hidden">document.getElementById("text").innerHTML = "mingyuan"</textarea>
        <iframe id="outputTextArea" class="panel"></iframe>

    </div>
    <script type="text/javascript">
        function updateOutput() {
            $("iframe").contents().find("html").html("<html><head><style type='text/css'>"
            + $("#cssTextArea").val()
            + "</style></head><body>"
            + $("#htmlTextArea").val()
            + "</body></html>");
            document.getElementById("outputTextArea").contentWindow.
            eval($("#javascriptTextArea").val());

        }
        $(".buttons").hover(function () {
            $(this).addClass("highLightedButton");
        },
        function () {
            $(this).removeClass("highLightedButton");

        })
        $(".buttons").click(function () {
            $(this).toggleClass("active");
            $(this).removeClass("highLightedButton");
            var clickID = $(this).attr("id") + "TextArea";
            $("#" + clickID).toggleClass("hidden");
            var numberOfActiveArea = 4 - $(".hidden").length;
            $(".panel").width($(window).width() / numberOfActiveArea - 5);

        })
        $(".panel").height($(window).height() - $("#header").height());
        $(".panel").width($(window).width() / 2 - 5);
        updateOutput();
        $("textarea").on("change keyup paste", function() {
            updateOutput();
        })


    </script>


  </body>
</html>
